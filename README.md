# StreamCommunication

StreamCommunication is a sample program meant to show how to make programs communicate via `stdin` and `stdout`.

I got inspired by this year's [aichallenge](http://aichallenge.org/), an online competition for programmers where contendent's provided _bots_ (programs) challenge each other in a virtual arena. 

I provide a host written in Java and some _bots_ written in various languages I use.

The host "loads" the bots (spawns two processes with the provided bots) and handle their input and output.

## The mighty communication protocol

To keep things simple, the task that the bots have to accomplish (and the protocol used) is very simple. Each protocols responds to 4 "questions": `ready?`, `bye!`, `generate code` and `find code`.

`ready?` -> must reply with `ready!`
`bye!` -> must reply with `bye!` and exit
`generate code` -> must output 5 lines of each with 5 dots and one randomly placed sharp. Examples of valide codes:

     .....     .....     .....     .....     ...#.
     ...#.     .....     .....     .....     .....
     .....     .....     .....     ..#..     .....
     .....     .#...     .....     .....     .....
     .....     .....     ....#     .....     .....

`find code` -> must read the following 5 lines from `stdin` and write the position of the sharp for the provided code (top-left is `0 0`). The correct answers for the previous codes are hence: `3 1`, `1 3`, `4 4`, `2 2` and `3 0`.

## Compiling and running the host

    ant compile jar
    
This creates `build/jar/Host.jar`. To make to bots communicate, simply provide the commands to launch them, for example:

    java -jar build/jar/Host.jar "./cbot" "python pythonbot.py"

`runhost.sh` and `runhost.bat` would compile and execute a sample bot for you (if python is installed).
    
You can experiment with your own bots or take a look at the sample ones I've written (keep reading).

Once executed, Host will output what's going on and any error generated by the bots. Sample output:
    
    Bot 1 ready!
    Bot 2 ready!
    Generated code:
    ....#
    .....
    .....
    .....
    .....
    Bot 2 found the right code [4 0]!
    Waving bots goodbye...
    Everything went as expected. Good job!

## Bots and notes

As a general note, if you launch the bots from withing a script, you may encounter a problem with the bot writing to `stdout` but it kept from being flushed. To overcome this problem, where possible, I forced the flush of standard output.

### Bash